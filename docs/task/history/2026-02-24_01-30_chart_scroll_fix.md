# 验收文档：图表自动滚动与实时跟随 (Build-019)

## 核心优化
针对图表无法随时间平移、无法自动显示最新点的问题，进行了如下改进：

### 1. 自动滚动机制
- **配置升级**: 在主图表的 `timeScale` 中启用了 `shiftVisibleRangeOnNewBar: true`。当新一根 K 线产生时，图表会自动向左平移，确保最新数据不被遮挡。
- **逻辑增强**: 在 `updateChart` 函数中加入了对实时点的对焦检查。如果用户当前处于视野最右侧，系统会自动调用 `scrollToRealTime()`，确保新到来的 Tick 能立即反映在视野中。

### 2. 同步与视觉优化
- **参考线延伸限制**: 调整了 RSI 和资产曲线中的辅助线（如 70/30 线和初始资金线）。现在这些线仅向未来延伸 1 小时，而不是 24 小时。
    - **修复目的**: 之前的长参考线会导致 `lightweight-charts` 在 `fitContent()` 或自动缩放时在右侧预留巨大的空白区域，现在视觉上更加紧凑、对齐。
- **时间轴深度联动**: 三图的时间轴同步逻辑已在自动滚动状态下经过优化，确保 K 线移动时，RSI 和资产曲线同步平移。

## 版本信息
- **版本号**: V4.3
- **构建 ID**: 2026-02-24-Build-019
- **更新描述**: 启用图表自动滚动与时间轴平移。

## 验证结论
- [x] 新 Tick 到来时，最新价格点始终可见。
- [x] 跨图表的时间轴在自动滚动中保持严格一致。
- [x] 手动回看历史后，产生新数据时若视野在末尾会自动跳回最新，若视野在历史则保持不动（符合用户交互习惯）。

render_diffs(file:///c:/Projects/CTS1/templates/dashboard.html)
